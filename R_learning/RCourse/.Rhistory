{
nc <- ncol(y)
means <- numeric(nc)
for (i in 1:nc)
{
means[i] <- mean(y[,i])
}
means
}
columnmean(ozone)
columnmean <- function(y, removeNA = TRUE)
{
nc <- ncol(y)
means <- numeric(nc)
for (i in 1:nc)
{
means[i] <- mean(y[,i], na.rm = removeNA)
}
means
}
columnmean(ozone)
columnmean(ozone, FALSE)
class(columnmean())
class(columnmean
)
attributes(columnmean)
formals(columnmean)
name(columnmean)
names(columnmean)
names(columnmean) <- "bob"
names(columnmean) <- c("bob")
names(columnmean)[[2]]
formals(columnmean)[[2]]
formals(columnmean)[[1]]
formals(columnmean)[1]
formals(columnmean)[2]
formals(columnmean)[1,1]
formals(columnmean)[1]
class(formals(columnmean)[1])
formals(columnmean)[1][1]
formals(columnmean)[1][1][1]
formals(columnmean)[2]
len(formals(columnmean)[1])
length(formals(columnmean)[1])
length(formals(columnmean)[2])
attributes(formals(columnmean)[2])
attributes(formals(columnmean)[1])
x <- list("a", 2, TRUE)
x
x[1]
length(x[[1]])
attributes(x)
names(x)
names(x) <- c("a", "b", "c")
attributes(x)
x
x.$a
x$a
x$b
class(x$b)
x[[2]] <- 1:2
x
sapply(x, length)
help(lm)
## Annette Dobson (1990) "An Introduction to Generalized Linear Models".
## Page 9: Plant Weight Data.
ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2, 10, 20, labels = c("Ctl","Trt"))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group)
lm.D90 <- lm(weight ~ group - 1) # omitting intercept
class(lm.D9)
plot(ctl,trt)
group
weight
group
class(group)
help(gl)
opar <- par(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))
plot(lm.D9, las = 1)      # Residuals, Fitted, ...
par(opar)
group
f <- function(a, b)
{
a^2
}
f(2)
f(2, 0, 2)
f <- function(a, b)
{
print(a)
print(b)
}
f(2)
mean
args(paste)
args(c)
class(args(c))
paste("a", "b", sep = ":")
paste("a", "b", ":", sep = ":")
paste("a", "b", ":", se = ":")
search()
columnmean <- function(y, removeNA = TRUE)
{
nc <- ncol(y)
means <- numeric(nc)
for (i in 1:nc)
{
means[i] <- mean(y[,i], na.rm = removeNA)
}
means
}
ls(environment(columnmean))
environment(columnmean)
get("above", environment(columnmean))
x <- as.Date("1970-01-01")
x
unclass(x)
x <- as.Date("2015-12-10")
unclass(x)
360*45
weekdays(x)
months(c(x,x))
x <- Sys.time()
x
class(x)
unclass(x)
y <- as.POSIXlt(x)
names(unclass(y))
y$sec
class(x)
class(class(x))
sprint('%03d', 5)
sprintf('%03d', 5)
sprintf('%03d', 5)+'.csv'
file.path('c','bob', paste(sprintf('%03d', 200),'.csv'))
file.path('c:','bob', paste(sprintf('%03d', 200),'.csv'))
directory <- 'C:\\Users\\Ken\\Desktop\\Sandbox\\R_learning\\RCourse\\specdata'
pollutant <- c('nitrate')
id <- c(1)
sum <- 0.0
count <- 0.0
for (i in id)
{
data <- read.csv(file.path(directory, paste(sprintf('%03d', i),'.csv')))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
}
directory <- 'C:/Users/Ken/Desktop/Sandbox/R_learning/RCourse/specdata'
sum <- 0.0
count <- 0.0
for (i in id)
{
data <- read.csv(file.path(directory, paste(sprintf('%03d', i),'.csv')))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
}
sum <- 0.0
count <- 0.0
for (i in id)
{
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv'), sep = '\\'))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
}
directory <- 'C:\\Users\\Ken\\Desktop\\Sandbox\\R_learning\\RCourse\\specdata'
sum <- 0.0
count <- 0.0
for (i in id)
{
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv'), sep = '\\'))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
}
sum <- 0.0
count <- 0.0
for (i in id)
{
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = '\\'))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
}
data
length(data)
sum(data)
pollutantmean <- function(directory, pollutant, id = 1:332)
{
psum <- 0.0
pcount <- 0.0
for (i in id)
{
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = '\\'))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
psum <- psum + sum(data)
pcount <- pcount + length(data)
}
psum / pcount
}
pollutantmean(directory = directory, "sulfate", 1:10)
pollutantmean(directory = directory, "nitrate", 70:72)
pollutantmean(directory = directory, "nitrate", 23)
Sys.info()['sysname']
Sys.info()['sysname'] == 'Windows'
pollutantmean <- function(directory, pollutant, id = 1:332)
{
psum <- 0.0
pcount <- 0.0
for (i in id)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
data <- data[[pollutant]][!is.na(data[[pollutant]])]
psum <- psum + sum(data)
pcount <- pcount + length(data)
}
psum / pcount
}
pollutantmean(directory = directory, "nitrate", 23)
pollutantmean(directory = directory, "nitrate", 70:72)
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
submit()
submit()
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
data
i
i = 15
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
data
complete.cases(data[['nitrate']], data[['sulfate'']])
)
)
)
data[['nitrate']]
complete.cases(data[['nitrate']], data[['sulfate'']])
complete.cases(data[['nitrate']], data[['sulfate']])
sum(complete.cases(data[['nitrate']], data[['sulfate']]))
complete <- function(directory, id = 1:332)
{
gvec <- vector(length = length(id))
index = 1
for (i in id)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
gvec[index] <- sum(complete.cases(data[['nitrate']], data[['sulfate']]))
index = index + 1
}
df <- dataframe(id, gvec)
}
complete(directory, 20)
complete <- function(directory, id = 1:332)
{
gvec <- vector(length = length(id))
index = 1
for (i in id)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
gvec[index] <- sum(complete.cases(data[['nitrate']], data[['sulfate']]))
index = index + 1
}
df <- data.frame(id, gvec)
}
complete(directory, 20)
df <- complete(directory, 20)
df
complete <- function(directory, id = 1:332)
{
nobs <- vector(length = length(id))
index = 1
for (i in id)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
nobs[index] <- sum(complete.cases(data[['nitrate']], data[['sulfate']]))
index = index + 1
}
df <- data.frame(id, nobs)
}
df <- complete(directory, 20)
df
complete <- function(directory, id = 1:332)
{
nobs <- vector(length = length(id))
index = 1
for (i in id)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, paste(sprintf('%03d', i),'.csv', sep = ''), sep = psep))
nobs[index] <- sum(complete.cases(data[['nitrate']], data[['sulfate']]))
index = index + 1
}
df <- data.frame(id, nobs)
df
}
complete(directory, 1)
complete(directory, c(2,4,8,10,12))
complete(directory, 30:25
)
complete(directory, 3)
getwd()
submit()
dir <- "C:\\Users\\Ken\\Desktop\\Sandbox\\R_learning\\RCourse\\specdata"
list.files(dir)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, files, sep = psep))
print(length(data))
}
}
corr(dir)
dir
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, files, sep = psep))
print(length(data))
}
}
corr(dir)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
print(length(data))
}
}
corr(dir)
data
names(data)
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
comp
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
comp[comp]
length(comp(comp))
comp
length(comp)
length(comp(comp))
length(comp[comp])
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, files, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comop], data[["nitrate"]][comp])
print(nsCorr)
}
print(length(data))
}
}
corr(dir, 150)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comop], data[["nitrate"]][comp])
print(nsCorr)
}
print(length(data))
}
}
corr(dir, 150)
if (length(comp[comp]) > threshold)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
print(nsCorr)
}
print(length(data))
}
}
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
print(files)
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
print(nsCorr)
}
print(length(data))
}
}
corr(dir, 150)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
output <- vector(mode  = "numerics")
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
output <- c(output, nsCorr)
}
output
}
}
cr <- corr("specdata", 150)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
output <- vector(mode  = "numeric")
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
output <- c(output, nsCorr)
}
output
}
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
corr(dir, 150)
cr <- corr(dir, 150)
head(cr)
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
output <- vector(mode  = "numeric")
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
output <- c(output, nsCorr)
}
}
output
}
corr <- function(directory, threshold = 0)
{
files <- list.files(directory)
output <- vector(mode  = "numeric")
for (f in files)
{
psep <- if (Sys.info()['sysname'] == 'Windows'){'\\'} else {'/'}
data <- read.csv(paste(directory, f, sep = psep))
comp <- complete.cases(data[["Date"]], data[["sulfate"]], data[["nitrate"]], data[["ID"]])
if (length(comp[comp]) > threshold)
{
nsCorr = cor(data[["sulfate"]][comp], data[["nitrate"]][comp])
output <- c(output, nsCorr)
}
}
output
}
cr <- corr(dir, 150)
head(cr)
summary(cr)
cr <- corr(dir, 400)
head(cr)
summary(cr)
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
submit()
submit()
submit()
submit()
submit()
submit()
submit()
